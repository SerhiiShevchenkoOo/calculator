"use strict";function togglePower(){document.getElementById("active").classList.contains("off")?on():off()}async function on(){clear(),document.getElementById("active").classList.remove("off"),power(),await pause(1),clear(),await main(),await pause(1),clear(),pushToTerminal(),document.querySelector(".math").classList.toggle("shadow")}async function off(){document.querySelector(".math").classList.toggle("shadow"),power(!1),document.getElementById("active").classList.add("off"),document.querySelector(".output").style.display="none",document.querySelector(".math").append(document.querySelector(".output")),clear(),await pause(.3)}function power(e=!0){document.querySelector("#active").classList.toggle("on",e)}async function printer(e,t,r){let a=document.querySelector(e);if(r)for(let e=t.length-1;e>=0;e--){let r=t[e];await Promise.delay(10),a.innerHTML=r+a.textContent}else for(let e of t)await Promise.delay(10),a.innerHTML=a.textContent+e}async function main(){let e=""+[text.textContent];await printer(".terminal",e)}function clear(e=document.querySelector(".terminal")){e.innerHTML=""}function pause(e=1){return new Promise(t=>setTimeout(t,1e3*Number(e)))}async function pushToTerminal(){await pause(1);let e=document.createElement("p");e.innerHTML="welcome<br>calculator(TM) 3000......................",document.querySelector(".terminal").append(e),await pause(3),clear(),document.querySelector(".terminal").append(document.querySelector(".output")),document.querySelector(".output").style.display="block"}async function error(){await pause(1);let e=document.createElement("p");e.innerHTML="error44",e.className="err",document.querySelector(".terminal").prepend(e),await pause(5),e.remove()}document.querySelector("#power").addEventListener("click",togglePower),Promise.delay=e=>new Promise(t=>{setTimeout(t,e)});class Calculator{constructor(e,t){this.previousOperandTextElement=e,this.currentOperandTextElement=t,this.readyToReset=!1,this.clear()}clear(){this.currentOperand="",this.previousOperand="",this.operation=void 0}delete(){this.currentOperand=this.currentOperand.toString().slice(0,-1)}appendNumber(e){"."===e&&this.currentOperand.includes(".")||(this.currentOperand=this.currentOperand.toString()+e.toString())}chooseOperation(e){""!==this.currentOperand&&(""!==this.previousOperand&&""!==this.previousOperand&&this.compute(),this.operation=e,this.previousOperand=this.currentOperand,this.currentOperand="")}compute(){let e;const t=parseFloat(this.previousOperand),r=parseFloat(this.currentOperand);if(!isNaN(t)&&!isNaN(r)){switch(this.operation){case"+":e=(t+r).toFixed(Math.max((""+t).length-1,(""+r).length-1));break;case"-":e=(t-r).toFixed(Math.max((""+t).length-1,(""+r).length-1));break;case"*":e=(t*r).toFixed(Math.max((""+t).length-1,(""+r).length-1));break;case"รท":if(0==r){e=error();break}e=(t/r).toFixed(Math.max((""+t).length,(""+r).length));break;case"pow":e=Math.pow(t,r).toFixed(Math.max((""+t).length-1,(""+r).length-1));break;case"sqrt":if(t>=0){e=Math.sqrt(t).toFixed((""+t).length+3);break}e=error();break;default:return}this.readyToReset=!0,this.currentOperand=e,this.operation=void 0,this.previousOperand=""}}getDisplayNumber(e){const t=e.toString(),r=parseFloat(t.split(".")[0]),a=t.split(".")[1];let n;return n=isNaN(r)?"":r.toLocaleString("en",{maximumFractionDigits:0}),null!=a?`${n}.${a}`:n}updateDisplay(){this.currentOperandTextElement.innerText=this.getDisplayNumber(this.currentOperand),null!=this.operation?this.previousOperandTextElement.innerText=`${this.getDisplayNumber(this.previousOperand)} ${this.operation}`:this.previousOperandTextElement.innerText=""}}const numberButtons=document.querySelectorAll("[data-number]"),operationButtons=document.querySelectorAll("[data-operation]"),equalsButton=document.querySelector("[data-equals]"),deleteButton=document.querySelector("[data-delete]"),allClearButton=document.querySelector("[data-all-clear]"),previousOperandTextElement=document.querySelector("[data-previous-operand]"),currentOperandTextElement=document.querySelector("[data-current-operand]"),calculator=new Calculator(previousOperandTextElement,currentOperandTextElement);numberButtons.forEach(e=>{e.addEventListener("click",()=>{""===calculator.previousOperand&&""!==calculator.currentOperand&&calculator.readyToReset&&(calculator.currentOperand="",calculator.readyToReset=!1),calculator.appendNumber(e.innerText),calculator.updateDisplay()})}),operationButtons.forEach(e=>{e.addEventListener("click",()=>{calculator.chooseOperation(e.innerText),calculator.updateDisplay()})}),equalsButton.addEventListener("click",e=>{calculator.compute(),calculator.updateDisplay()}),allClearButton.addEventListener("click",e=>{calculator.clear(),calculator.updateDisplay()}),deleteButton.addEventListener("click",e=>{calculator.delete(),calculator.updateDisplay()});